<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.company.project.dao.XcWithdrawMapper">
  <resultMap id="BaseResultMap" type="com.company.project.model.XcWithdraw">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="create_user_id" jdbcType="VARCHAR" property="createUserId" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="update_user_id" jdbcType="VARCHAR" property="updateUserId" />
    <result column="is_delete" jdbcType="BIT" property="isDelete" />
    <result column="version" jdbcType="INTEGER" property="version" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="currency_name" jdbcType="VARCHAR" property="currencyName" />
    <result column="qr_code" jdbcType="VARCHAR" property="qrCode" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="withdraw_currency" jdbcType="VARCHAR" property="withdrawCurrency" />
    <result column="withdraw_number" jdbcType="DECIMAL" property="withdrawNumber" />
  </resultMap>

  <select id="list" resultType="com.company.project.model.XcWithdraw">
      select w.id as id,w.create_time as createTime,w.create_user_id as createUserId,
              w.status as status,w.currency_name as currencyName,w.qr_code as qrCode,
              w.address as address,w.withdraw_currency as withdrawCurrency,w.withdraw_number as withdrawNumber,
              u.phone as phone
      from t_withdraw w inner join t_user u on w.create_user_id = u.id
      where
      w.is_delete = 0
      and u.is_delete = 0
      <if test="phone != null and phone != ''">
        and u.phone LIKE concat(concat('%',#{phone}),'%')
      </if>
      <if test="startTime != null and startTime != '' and endTime != null and endTime != '' ">
        and DATE_FORMAT(w.create_time,'%Y-%m-%d') BETWEEN #{startTime} AND #{endTime}
      </if>
  </select>

</mapper>